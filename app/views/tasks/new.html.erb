
<div class="panel" style="border: 1px solid #072c61;">
  <div class="panel-heading" style="background-color: #072c61;">
    <center><span style="font-weight: bold; color: white;">Apply For Project</span></center>
  </div>
  <div class="panel-body">

    <%= form_for @task, url: tasks_create_path(@task), :method => :post do |f| %>
      <%= hidden_field_tag :email, @email %>

      <div class="field form-group">
        <%= f.label :Name%>
        <%= f.text_field :name ,:value=>current_user.name, :class => 'form-control',autofocus: true%><br>
      </div>

      <div class="field form-group">
        <%= f.label :Email%>
        <%= f.text_field :email1 ,:value=>current_user.email, :class => 'form-control',autofocus: true%><br>
      </div>

      <div class="field form-group">
        <%= f.label :Year %>
        <%= f.select :year, options_for_select([
          ["You Are in Which Year?", {}], 
          "1", 
          "2", 
          "3", 
          "4"]), 
          {}, { class: "form-control"} %><br>
      </div>
          
      <div class="form-group">
        <%= f.label :Branch %>
        <%= f.select :branch, options_for_select([
          ["You Are in Which Branch?", ""],  
          "ICE", 
          "MPAE"]), 
          {}, { class: "form-control" } %><br>
      </div>

      <div class="form-group">
        <%= f.label :Percentage %>
        <%= f.text_field :percentage ,:value=>current_user.percentage, :class => 'form-control'%><br>
      </div>

      <div class="form-group">
        <%= f.label :"Project name" %>
        <span style="color: #072c61; font-family:Karla,sans-serif;">(<span id="project_name_counter">30</span> Characters Remaining)</span>

        <%= f.text_field :task_name , :class => 'form-control', id:'project_name'%><br>
      </div>
          
      <div class="form-group">
        <%= f.label :"Project Description" %>
        <span style="color: #072c61; font-family:Karla,sans-serif;">
        <%= f.text_area :task_desc , :class => 'form-control',id:'project_description'%><br>
      </div>

      <div class="form-group">
        <%= f.label :"Members in Project ? "%>
        <div style="padding: 10px;">
          <span class="members"><%= f.radio_button :members_count, '1',checked: true %> 1</span>
          <span class="members"><%= f.radio_button :members_count, '2' %> 2</span>
          <span class="members"><%= f.radio_button :members_count, '3' %> 3</span>
          <span class="members"><%= f.radio_button :members_count, '4' %> 4</span>
          <span class="members"><%= f.radio_button :members_count, '5' %> 5</span>
        </div>
      </div>

      <div id="emails">
        <div class="field form-group" id="email2">
          <span class="members"><%= f.label :Email%> of 2nd Member</span> 
          <%= f.text_field :email2 , :class => 'form-control',autofocus: true%><br>
        </div>
        
        <div class="field form-group" id="email3">
          <span class="members"><%= f.label :Email%> of 3rd Member</span>
          <%= f.text_field :email3 , :class => 'form-control',autofocus: true%><br>
        </div>
        
        <div class="field form-group" id="email4">
          <span class="members"><%= f.label :Email%> of 4th Member</span>
          <%= f.text_field :email4 , :class => 'form-control',autofocus: true%><br>
        </div>
        
        <div class="field form-group" id="email5">
          <span class="members"><%= f.label :Email%> of 5th Member</span>
          <%= f.text_field :email5 , :class => 'form-control',autofocus: true%><br>
        </div>
      </div>
      <div class="form-group">
        <%=f.submit "Apply", :class=>"btn btn-block",id:'submit_button',:style=>"background-color:#072c61; color: white;"%>
      </div>
          
    <% end %>    
  </div>
</div>
<style type="text/css">
  .form-control:focus {
  border-color: #072c61;
}
.members{
  font-family: 'Karla',sans-serif; color: #072c61;
}
@media screen and (max-width:1099px){
    .panel{
      margin-top: 90px;
    }
label{
  font-family: 'Merriweather',serif;
  color:#072c61;
  }
}
</style>

<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function(event) {
  var r1 = document.getElementById('task_members_count_1');
  var r2 = document.getElementById('task_members_count_2');
  var r3 = document.getElementById('task_members_count_3');
  var r4 = document.getElementById('task_members_count_4');
  var r5 = document.getElementById('task_members_count_5');

  var emails = document.getElementById('emails');
  var k = []

  k = Array.from(emails.children)
  
  var n = k.length

  for(var i=0;i<n;i++)
    k[i].style.display = "none";

  r1.addEventListener('change',function (event) {
    k[0].style.display = "none";
    k[1].style.display = "none";
    k[2].style.display = "none";
    k[3].style.display = "none";
  });
  
  r2.addEventListener('change',function (event) {
    k[0].style.display = "block";
    k[1].style.display = "none";
    k[2].style.display = "none";
    k[3].style.display = "none";
  });

  r3.addEventListener('change',function (event) {
    k[0].style.display = "block";
    k[1].style.display = "block";
    k[2].style.display = "none";
    k[3].style.display = "none";
  });

  r4.addEventListener('change',function (event) {
    k[0].style.display = "block";
    k[1].style.display = "block";
    k[2].style.display = "block";
    k[3].style.display = "none";
  });
  
  r5.addEventListener('change',function (event) {
    k[0].style.display = "block";
    k[1].style.display = "block";
    k[2].style.display = "block";
    k[3].style.display = "block";
  });

  var text_area = document.getElementById('project_name');
  var char = document.getElementById('project_name_counter');
  var submit_button = document.getElementById('submit_button');

  text_area.addEventListener('input',function(){
  char.innerHTML = 30 - text_area.value.length;
  
  if(text_area.value.length > 30)
    {
    char.style.color = "red";
    submit_button.disabled = true;
    char.innerHTML = 0;
    }
    else{
    char.style.color = "#072c61";
    submit_button.disabled = false;
    }
  });
});
</script>